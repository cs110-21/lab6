<h1> Room </h1>
<p>This is a demo of chatroom page</p>
<p>
    The room you are visiting is {{ roomName }}
</p>
<ul id="list-template">
    {{#each messages}}
    <li>{{this}}</li>
    {{/each}}
</ul>
<iframe name="iframeSendMessage" style="display:none;"></iframe>
<form action="/sendMessage" method="POST" id="sendMessageForm" target="iframeSendMessage">
    <input type="hidden" name="id" value="{{id}}" />
    <input type="text" name="messageText" placeholder="enter a message" />
    <input type="submit" id="sendMessageSubmit" value="send message" />
</form>
<script src="https://twitter.github.io/typeahead.js/js/handlebars.js"></script>
<script>
    function sendMessage() {
        document.getElementById('sendMessageForm').submit();
        setTimeout(location.reload.bind(location), 500);
    }

    document.getElementById('sendMessageSubmit').addEventListener("click", sendMessage);
</script>